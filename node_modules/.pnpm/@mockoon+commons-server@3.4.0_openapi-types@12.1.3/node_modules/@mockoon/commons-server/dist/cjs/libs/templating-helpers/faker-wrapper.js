"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.FakerWrapper = void 0;
const faker_1 = require("@faker-js/faker");
const utils_1 = require("../utils");
exports.FakerWrapper = {
    faker: function (...args) {
        const hbsOptions = args[args.length - 1];
        let fakerName;
        if (args.length === 1) {
            fakerName = '';
        }
        else {
            fakerName = (0, utils_1.fromSafeString)(args[0]);
        }
        if (typeof fakerName !== 'string') {
            throw new Error(`Faker method name must be a string (valid: "address.zipCode", "date.past", etc) line ${hbsOptions.loc && hbsOptions.loc.start && hbsOptions.loc.start.line}`);
        }
        const [fakerPrimaryMethod, fakerSecondaryMethod] = fakerName.split('.');
        let errorMessage = `${fakerName} is not a valid Faker method`;
        // check faker helper name pattern
        if (!fakerName ||
            !fakerName.match(/^[a-z]+\.[a-z]+$/i) ||
            !fakerPrimaryMethod ||
            !fakerSecondaryMethod ||
            !faker_1.faker[fakerPrimaryMethod] ||
            !faker_1.faker[fakerPrimaryMethod][fakerSecondaryMethod]) {
            if (!fakerName) {
                errorMessage = 'Faker method name is missing';
            }
            throw new Error(`${errorMessage} (valid: "address.zipCode", "date.past", etc) line ${hbsOptions.loc &&
                hbsOptions.loc &&
                hbsOptions.loc.start &&
                hbsOptions.loc.start.line}`);
        }
        const fakerFunction = faker_1.faker[fakerPrimaryMethod][fakerSecondaryMethod];
        const fakerArgs = args.slice(1, args.length - 1);
        // push hbs named parameters (https://handlebarsjs.com/guide/block-helpers.html#hash-arguments) to Faker
        if (!(0, utils_1.IsEmpty)(hbsOptions.hash)) {
            fakerArgs.push(hbsOptions.hash);
        }
        return fakerFunction(...fakerArgs);
    }
};
//# sourceMappingURL=faker-wrapper.js.map